# docker-compose configuration
services:
  scikit-logreg-model:
    image: ${image_name}
    container_name: ${image_name}
    hostname: ${image_name}
    networks:
      - scikit-logreg-model-workflow-net
    healthcheck:
      test: timeout 5s bash -c ':> /dev/tcp/127.0.0.1/8061' || exit 1
      interval: 1s
      timeout: 2s
      retries: 100
    volumes:
      - "${inputs}:/inputs:ro"
      - "${results}:/results"
  mock-orchestrator:
    image: mock-orch
    container_name: mock-orchestrator
    hostname: mock-orchestrator
    environment:
      TOOL_HOSTNAME: "${image_name}"
      TOOL_FUNC: "predict_wrapper"
      INPUT_URI_LIST: "/inputs/features.json"
      OUTPUT_URI_LIST: "/results/result.json"
    networks:
      - scikit-logreg-model-workflow-net
    depends_on:
      scikit-logreg-model:
        condition: service_healthy
    volumes:
      - "${inputs}:/inputs:ro"
      - "${results}:/results"

networks:
  scikit-logreg-model-workflow-net:
